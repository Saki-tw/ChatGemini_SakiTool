#!/bin/bash
# Gemini Chat 啟動腳本
# 使用 ChatGemini_SakiTool 目錄下的虛擬環境

# 取得腳本所在目錄
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# 檢查虛擬環境是否存在（venv_py314 或上層目錄的 .venv）
if [ -d "$SCRIPT_DIR/venv_py314" ]; then
    VENV_DIR="$SCRIPT_DIR/venv_py314"
elif [ -d "$SCRIPT_DIR/../.venv" ]; then
    VENV_DIR="$SCRIPT_DIR/../.venv"
else
    echo "錯誤：找不到虛擬環境"
    echo "請先執行: ./INSTALL.sh"
    exit 1
fi

# 啟用進階輸入功能並執行
export GEMINI_ADVANCED_INPUT=true
export GEMINI_OUTPUT_DIR=claude
"$VENV_DIR/bin/python" "$SCRIPT_DIR/gemini_chat.py" "$@"
