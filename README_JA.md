# ChatGemini
**90%節約！軽量ベクトルデータベース！MCP統合！ワンコマンド完全Gemini AIツールキット**

中文ページ: https://github.com/Saki-tw/ChatGemini_SakiTool/blob/main/README.md
English page: https://github.com/Saki-tw/ChatGemini_SakiTool/blob/main/README_EN.md
한국어 페이지: https://github.com/Saki-tw/ChatGemini_SakiTool/blob/main/README_KO.md

---

## 💡 なぜこのツールを使うのか？

> **「API料金を節約したかっただけなのに、完全なツールキットができてしまった」**
> —— Saki-Tw (Saki@saki-studio.com.tw with Claude)

このプロジェクトは、**Gemini APIの料金を節約する**ために個人的に開発したツールとして始まりました。使用過程で継続的に最適化し、自動キャッシュ、ベクトルデータベース、スマートトリガーなどの機能を追加した結果、機能完全で使いやすいAIツールキットに進化しました。

本当に便利なので、オープンソースで皆さんと共有することにしました！

### 🎯 コア機能

#### 💰 スマートキャッシングシステム
自動キャッシュ管理でAPIコストを削減。Flashモデルで90%、Proモデルで75%節約。対話が5000トークンに達すると自動的にキャッシュを構築し、以降のクエリコストを大幅に削減。

#### 🗄️ 軽量ベクトルデータベース
FAISSを使用してコードインデックスを構築、クエリ複雑度をO(n)からO(log n)に削減。セマンティック検索、直交重複排除、増分更新をサポート。大規模データベースのインストール不要。

#### 🌍 多言語インターフェース
繁体字中国語、English、日本語、한국어をサポート。7,996行の専門翻訳、対話中に`lang`と入力して即座に切り替え、スマートフォールバック機構で安定性を確保。

#### 🔌 MCPスマート統合
MCPサーバープロトコルをサポート、7つのツールを自動検出（ファイル操作、Git管理、Web検索など）、ゼロ設定で使用可能、87.5%テスト合格率。

#### ⚡ ワンライン インストール
```bash
git clone https://github.com/Saki-tw/ChatGemini_SakiTool.git && cd ChatGemini_SakiTool && sh INSTALL.sh --auto
```

macOSとLinuxに対応した完全自動インストール。インストール後、任意の場所で`ChatGemini`と入力して起動。

---

## 📦 プロジェクト情報

**プロジェクト名**: ChatGemini_SakiTool  
**バージョン**: v1.0.6  
**作者**: Saki-tw with Claude Code  
**連絡先**: Saki@saki-studio.com.tw  
**最終更新**: 2025-11-01  

**APIキー申請**：https://aistudio.google.com/app/apikey
**月間無料枠**：Gemini 2.5 Proは無料利用枠を提供

---

## 🔥 バージョン更新履歴

### 📅 v1.0.6（2025-11-01）— スマートモデル管理

**コアアップデート**：

- 🤖 **動的モデルリストシステム**：Google APIから最新の利用可能なモデルを自動取得、24時間スマートキャッシング、手動更新サポート

- 🔧 **モデル幻覚の修正**：存在しないモデル名を修正、旧設定を自動移行してシームレスなアップグレード

- ⌨️ **入力体験の最適化**：ターミナル入力処理の改善、矢印キーとバックスペースのサポート、モデルリストのページネーション

- 🛠️ **システム互換性の向上**：クロスプラットフォームパス処理の改善、仮想環境検出の最適化

---

### 📅 v1.0.5（2025-10-29）— フラッグシップバージョン

#### 🌟 主要な改善点
- **多言語システムの完成**：1,491件の繁体字中国語 + 533件の英日韓翻訳
- **MCP統合システム**：7種類のツール、自動検出有効化、87.5%テスト合格率
- **パフォーマンス最適化**：バッチ処理の高速化、スマートキャッシュ、メモリ最適化
- **必要な容量**：約150-200 MB（すべての依存パッケージを含む）
- **18個のコアパッケージ**：AI SDK、UI、マルチメディア処理、ベクトルデータベース

---

### 📅 v1.0.4（2025-10-25）

#### 🌍 多言語インターフェースシステム
- **4言語サポート**：繁体字中国語、English、日本語、한국어を完全サポート
- **ワンクリック切り替え**：対話中に `lang` と入力してインターフェース言語を切り替え
- **自動検出**：初回起動時にシステム言語を自動検出
- **完全翻訳**：すべてのプロンプトメッセージ、エラー説明、メニューインターフェースが多言語化

#### ⚡ パフォーマンス最適化
- **バッチ処理の高速化**：複数のリクエストを同時処理し、全体的なパフォーマンスを向上
- **スマートキャッシュプリロード**：よく使用されるデータを自動的にプリロードし、待ち時間を削減
- **メモリ使用の最適化**：より効率的なデータ管理により、メモリ使用量を削減

---

### 📅 v1.0.3（2025-10-24）

#### ⚙️ システムアーキテクチャの最適化
- **統一構成管理システム**：3層アーキテクチャ設計（システムデフォルト → ユーザー構成 → 環境変数）、優先順位が明確
- **メモリ管理の最適化**：対話履歴の自動保存、最新50件のアクティブな対話を保持、古い対話は自動的にディスクにアーカイブ
- **スマートパス管理**：すべての出力パス（対話記録、メディア出力など）を統一管理し、必要なディレクトリを自動作成

#### 🛡️ エラー処理の大幅強化
- **スマートエラー診断**：エラー原因を自動分析し、解決策を提案（例：パッケージ不足 → インストールコマンドを表示）
- **予防的検証システム**：「プリフライトチェック」メカニズム、実行前にAPIステータス、依存ツール、パラメータの有効性を自動チェック
- **自動修復提案**：APIキー問題の自動ガイド設定、ffmpeg不足時のインストール指示を提供

---

## ✨ 完全機能リスト

### 🎯 コア対話機能

#### 💬 スマート対話システム
- **ストリーミング出力**：リアルタイム応答、完全生成を待つ必要なし
- **200万トークンサポート**：超長文処理能力（A4文書約1500ページ相当）
- **完璧な中国語処理**：繁体字中国語に最適化、自然で流暢
- **マルチターン記憶**：コンテキストを自動追跡、対話の流れを理解
- **リアルタイムコスト表示**：対話ごとにNT$コストを表示、小数点まで正確

#### 🧠 思考モード制御
- **固定予算モード**：`[think:5000]` トークン予算を指定して深く思考
- **自動決定モード**：`[think:auto]` AI が問題の複雑さを自動判断
- **思考無効化**：`[no-think]` 簡単な質問に素早く回答
- **透明なプロセス**：完全な推論プロセスを表示、AIの思考を理解

#### 💰 自動キャッシングシステム（75-90%節約）
- **スマート蓄積**：対話が5000トークンに達すると自動的にキャッシュを作成
- **1回のクエリで元が取れる**：キャッシュ作成後すぐに節約開始
- **完全に簡単**：手動管理不要、完全自動運転
- **コスト分析**：キャッシュ節約率をリアルタイム表示
- **柔軟な制御**：`[cache:now]` 即時、`[cache:off]` 一時停止、`[no-cache]` 単一対話を除外

### 📁 ファイル処理機能

#### 📎 スマートファイル添付
- **30+テキスト形式自動検出**：`.py` `.js` `.txt` `.md` `.json` `.yaml` など
- **メディアファイルアップロード**：`.jpg` `.png` `.mp4` `.pdf` 処理方法を自動判断
- **マルチファイル処理**：複数のファイルを一度に添付して相関分析
- **スマートパス解析**：相対パス、絶対パス、`~` ホームディレクトリをサポート

#### 🔍 ファイル分析機能
- **コードレビュー**：構文チェック、ロジック分析、最適化提案
- **ドキュメント理解**：README、APIドキュメント、技術仕様を読む
- **クロスファイル分析**：複数のファイル間の相互作用を理解
- **エラー診断**：ログとコードを組み合わせて問題を特定

### 💻 CodeGemini機能

#### 📊 軽量ベクトルデータベース（Codebase Embedding）
- **コードインデックス**：プロジェクトベクトルデータベースを構築
- **セマンティック検索**：キーワードだけでなく、コードの意味を理解
- **FAISS高速インデックス**：クエリ複雑度をO(n)からO(log n)に削減
- **直交重複排除**：重複を自動削除、コンテンツの線形独立性を確保
- **増分更新**：インデックス全体を再構築せずに単一ファイルを更新
- **並列処理**：ThreadPoolExecutorでマルチファイル同時処理
- **対話検索**：履歴対話コンテンツを検索

#### 🔌 MCPスマート統合システム
- **7種類のツール自動検出**：ファイル操作、Git管理、Web検索、順次推論など
- **ゼロ設定使用**：利用可能なツールを自動有効化、手動設定不要
- **87.5%テスト合格率**：厳格にテスト・検証済み
- **スマートフォールバック**：ツールが利用できない場合、バックアップソリューションに自動切り替え

---

## 📦 インストール

> **ワンライン・ワンコマンドインストール** - 完全自動化、いかなる対話も不要

### ワンクリック自動インストール（推奨）

以下のコマンドをターミナルにコピー＆ペースト：

```bash
git clone https://github.com/Saki-tw/ChatGemini_SakiTool.git && cd ChatGemini_SakiTool && sh INSTALL.sh --auto
```

**完全自動インストール（フルバージョン）**：
- OS自動検出（macOS/Linux）
- **ChatGemini + CodeGemini**（フルバージョン）を自動インストール
- いかなる対話や認証も不要
- **必要容量**：約150-200 MB（すべての依存パッケージを含む）

インストール完了後：
1. ターミナルを再起動（または `source ~/.zshrc` / `source ~/.bashrc` を実行）
2. **任意の場所**で `ChatGemini` と入力して起動

**含まれる機能**：
- ✅ **ChatGemini**：対話、画像/動画分析・生成、自動キャッシング
- ✅ **CodeGemini**：コードアシスタント、ベクトルデータベース検索、MCP統合

**パッケージリスト**（18個のコアパッケージ）：

**AI & SDK**：
- `google-generativeai>=0.3.0` - Gemini従来のSDK
- `google-genai>=1.45.0` - Gemini新バージョンSDK（主要使用）
- `google-cloud-translate>=3.22.0` - Google翻訳API（オプション）

**ユーザーインターフェース**：
- `rich>=13.0.0` - ターミナル美化
- `prompt-toolkit>=3.0.0` - 高度な入力機能（矢印キー、オートコンプリート）
- `Pillow>=10.0.0` - 画像処理

**マルチメディア処理**：
- `ffmpeg-python>=0.2.0` - 動画処理Pythonラッパー

**ベクトルデータベース**：
- `numpy>=1.24.0` - ベクトル計算
- `faiss-cpu>=1.7.0` - FAISS高速ベクトルインデックス（約30MB）

**パフォーマンス最適化**：
- `aiohttp>=3.9.0` - 非同期HTTPクライアント（約5MB）
- `psutil>=5.9.0` - CPUおよびメモリ監視

**翻訳とツール**：
- `deep-translator>=1.11.4` - 無料翻訳エンジン
- `duckduckgo-search>=4.0.0` - Web検索
- `python-dotenv>=1.0.0` - 環境変数管理
- `requests>=2.31.0` - HTTPリクエスト

**CodeGemini専用**：
- `pyyaml>=6.0` - YAML解析
- `html2text>=2020.1.16` - HTMLからテキストへ
- `beautifulsoup4>=4.12.0` - HTML解析
- `cachetools>=5.3.0` - キャッシングツール

---

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています

---

**Gemini AIとの対話をお楽しみください！** 🎉
