# 除錯協助提示詞模板

**問題標題:** [簡短描述問題]
**發生日期:** [日期與時間]
**嚴重程度:** [低/中/高/緊急]
**環境:** [開發/測試/生產]

---

## 問題描述

### 預期行為
[描述程式應該如何運作]

### 實際行為
[描述實際發生的情況]

### 重現步驟
1. [步驟 1]
2. [步驟 2]
3. [步驟 3]
4. [觀察到的錯誤]

### 發生頻率
- [ ] 每次都發生
- [ ] 間歇性發生
- [ ] 特定條件下發生
- [ ] 首次發生

---

## 環境資訊

### 系統環境
```
作業系統：[macOS/Linux/Windows + 版本]
架構：[x86_64/ARM]
Shell：[bash/zsh + 版本]
```

### 執行環境
```
程式語言：[語言 + 版本]
執行環境：[Node.js/Python/etc + 版本]
框架：[框架名稱 + 版本]
```

### 依賴版本
```
[關鍵套件名稱]：[版本號]
[另一個套件]：[版本號]
```

---

## 錯誤資訊

### 錯誤訊息
```
[完整的錯誤訊息]
```

### 堆疊追蹤（Stack Trace）
```
[完整的堆疊追蹤資訊]
```

### 錯誤代碼（Error Code）
```
錯誤代碼：[如有]
HTTP 狀態碼：[如適用]
```

---

## 相關程式碼

### 問題程式碼片段
```[language]
// 檔案：[檔案路徑]
// 行號：[起始行-結束行]

[貼上相關的程式碼]
```

### 相關配置
```[format]
# 配置檔：[檔案路徑]

[貼上相關配置]
```

---

## 已嘗試的解決方案

### 嘗試 1
**做法：** [描述嘗試的方法]
**結果：** [成功/失敗/部分解決]
**觀察：** [觀察到的變化]

### 嘗試 2
**做法：** [描述嘗試的方法]
**結果：** [成功/失敗/部分解決]
**觀察：** [觀察到的變化]

---

## 日誌資訊

### 應用程式日誌
```
[相關的日誌片段]
```

### 系統日誌
```
[系統日誌或錯誤日誌]
```

### 除錯輸出
```
[除錯模式下的輸出]
```

---

## 資料與狀態

### 輸入資料
```json
{
  "範例輸入": "資料"
}
```

### 預期輸出
```json
{
  "預期輸出": "資料"
}
```

### 實際輸出
```json
{
  "實際輸出": "資料"
}
```

### 應用程式狀態
```
[錯誤發生時的應用程式狀態]
```

---

## 額外資訊

### 最近的變更
- [最近修改的檔案或配置]
- [最近更新的套件]
- [環境變數的變更]

### 可能相關的因素
- [網路狀況]
- [資料庫狀態]
- [外部 API 狀態]
- [系統資源使用情況]

### 參考資料
- [相關文檔連結]
- [類似問題討論]
- [Stack Overflow 連結]

---

## 期望的協助

請協助：

1. **問題診斷**
   - [ ] 分析錯誤的根本原因
   - [ ] 識別潛在的問題來源
   - [ ] 提供可能的原因列表

2. **解決方案建議**
   - [ ] 提供具體的修復步驟
   - [ ] 建議程式碼修改
   - [ ] 推薦最佳實踐

3. **預防措施**
   - [ ] 建議如何避免未來發生
   - [ ] 推薦除錯工具或技術
   - [ ] 改進錯誤處理建議

---

## 除錯檢查清單

### 基本檢查
- [ ] 是否有語法錯誤？
- [ ] 所有必要的套件是否已安裝？
- [ ] 環境變數是否正確設定？
- [ ] 檔案路徑是否正確？
- [ ] 權限是否足夠？

### 資料檢查
- [ ] 輸入資料格式是否正確？
- [ ] 是否有 null 或 undefined 值？
- [ ] 資料類型是否匹配？
- [ ] 邊界條件是否處理？

### 環境檢查
- [ ] 版本相容性是否有問題？
- [ ] 是否有衝突的依賴？
- [ ] 環境變數是否載入？
- [ ] 網路連線是否正常？

### 邏輯檢查
- [ ] 條件判斷是否正確？
- [ ] 迴圈是否正常終止？
- [ ] 非同步操作是否正確處理？
- [ ] 錯誤處理是否完善？

---

## 期望輸出格式

```markdown
# 除錯分析報告

## 問題診斷

### 根本原因
[詳細說明問題的根本原因]

### 問題分析
1. [分析要點 1]
2. [分析要點 2]
3. [分析要點 3]

## 解決方案

### 方案 1：[標題]（推薦）
**步驟：**
1. [步驟 1]
2. [步驟 2]
3. [步驟 3]

**程式碼修改：**
```language
[修改後的程式碼]
```

**說明：** [為什麼這個方案有效]

### 方案 2：[標題]（替代）
...

## 驗證步驟
1. [如何驗證修復是否成功]
2. [測試案例]

## 預防措施
- [建議 1]
- [建議 2]

## 參考資源
- [相關文檔或教學]
```

---

## 使用方式

### 互動式除錯

```bash
# 啟動 Gemini CLI 並載入此模板
gemini --context ./templates/debugging.md

# 然後在對話中填入問題資訊
```

### 結合專案上下文

```bash
# 同時載入專案上下文與除錯模板
gemini --context ./GEMINI.md

# 在對話中參考除錯模板
> 我遇到一個問題，請按照 debugging 模板幫我分析...
```

### 使用 Checkpoint 儲存除錯進度

```bash
gemini
> /save debugging-session-[issue-id]
> [填入除錯資訊]
> [進行分析]
> /save debugging-session-[issue-id]  # 儲存進度
```

---

## 常見問題類型範例

### API 錯誤
```
問題：API 請求返回 500 錯誤
環境：生產環境
錯誤訊息：Internal Server Error
堆疊追蹤：[貼上]
```

### 效能問題
```
問題：頁面載入時間過長
環境：生產環境
預期：< 2 秒
實際：> 10 秒
效能分析：[貼上]
```

### 資料庫問題
```
問題：資料庫連線失敗
環境：開發環境
錯誤：Connection timeout
配置：[貼上資料庫配置]
```

### 部署問題
```
問題：Docker 容器啟動失敗
環境：Kubernetes
錯誤日誌：[貼上]
Dockerfile：[貼上]
```

---

## 進階除錯技巧

### 使用除錯工具
```bash
# Node.js
node --inspect app.js

# Python
python -m pdb script.py

# 使用日誌級別
LOG_LEVEL=debug npm start
```

### 隔離問題
1. 創建最小重現範例（Minimal Reproducible Example）
2. 逐步移除程式碼直到問題消失
3. 識別導致問題的最小程式碼集

### 二分法除錯
1. 在程式碼中間插入檢查點
2. 確定問題在前半或後半
3. 重複直到找到問題行

---

**提示：** 提供越詳細的資訊，Gemini 就能提供越準確的除錯建議。不要遺漏錯誤訊息、堆疊追蹤和環境資訊！
